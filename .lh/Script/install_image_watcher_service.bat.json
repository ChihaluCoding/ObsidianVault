{
    "sourceFile": "Script/install_image_watcher_service.bat",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1760279543746,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1760279543746,
            "name": "Commit-0",
            "content": "@echo off\r\nREM NSSM Service Registration Script for Image Watcher\r\nREM \r\nREM Prerequisites:\r\nREM 1. Download NSSM from https://nssm.cc/download\r\nREM 2. Extract nssm.exe and place it in a directory (e.g., C:\\nssm)\r\nREM 3. Add that directory to your PATH, or use the full path below\r\n\r\nSET SERVICE_NAME=ObsidianImageWatcher\r\nSET PYTHON_PATH=C:\\Users\\sakip\\AppData\\Local\\Programs\\Python\\Python310\\python.exe\r\nSET SCRIPT_PATH=c:\\Users\\sakip\\OneDrive\\ドキュメント\\Obsidian Vault\\Script\\auto_watch_and_move_images.py\r\nSET LOG_PATH=c:\\Users\\sakip\\OneDrive\\ドキュメント\\Obsidian Vault\\Script\\logs\r\n\r\necho Creating log directory...\r\nif not exist \"%LOG_PATH%\" mkdir \"%LOG_PATH%\"\r\n\r\necho Installing service %SERVICE_NAME%...\r\nnssm install %SERVICE_NAME% \"%PYTHON_PATH%\" \"%SCRIPT_PATH%\"\r\n\r\necho Configuring service...\r\nnssm set %SERVICE_NAME% AppDirectory \"c:\\Users\\sakip\\OneDrive\\ドキュメント\\Obsidian Vault\"\r\nnssm set %SERVICE_NAME% DisplayName \"Obsidian Image Watcher\"\r\nnssm set %SERVICE_NAME% Description \"Automatically moves image files to img folder\"\r\nnssm set %SERVICE_NAME% Start SERVICE_AUTO_START\r\n\r\nREM ログ設定\r\nnssm set %SERVICE_NAME% AppStdout \"%LOG_PATH%\\service_stdout.log\"\r\nnssm set %SERVICE_NAME% AppStderr \"%LOG_PATH%\\service_stderr.log\"\r\nnssm set %SERVICE_NAME% AppRotateFiles 1\r\nnssm set %SERVICE_NAME% AppRotateBytes 1048576\r\n\r\nREM 環境変数設定（Pythonパスの問題を回避）\r\nnssm set %SERVICE_NAME% AppEnvironmentExtra \"PYTHONIOENCODING=utf-8\"\r\n\r\necho Service installed successfully!\r\necho.\r\necho Logs will be saved to: %LOG_PATH%\r\necho.\r\necho To start the service, run: nssm start %SERVICE_NAME%\r\necho To stop the service, run: nssm stop %SERVICE_NAME%\r\necho To remove the service, run: nssm remove %SERVICE_NAME% confirm\r\npause\r\n"
        }
    ]
}